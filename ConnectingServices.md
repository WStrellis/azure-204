Four services for managing communication  between services:  
- Storage Queue
- Event Grid
- Event Hub
- Service Bus

## Message-based Service
- Sender requires receiver to do something with the message
- The message includes data as well as information about the event that created the data
- Supports transactions for groups of messages

*Message Delivery Strategies*
- At-Least-Once Delivery : Each message in the queue is guaranteed to be delivered to at least one Receiver. However, this makes it possible for a Receiver to get duplicate messages. App code needs to watch for duplicate messages.
- At-Most-Once Delivery : Messages may not be read by a Receiver, but duplicates are not possible.
- FIFO : Use a queue system with a FIFO guarantee.

### Queue Storage
- Simple, easy to setup
- supports queue size greater than 80gb
- stores messages sent from Providers until a Subscriber reads them

### Service Bus Queues
- supports transactions, At-Most-Once delivery, batching messages, FIFO guarantee, RBAC

### Service Bus Topics
- suports "Topics", allowing multiple Receivers to handle each message

*Topics*
Allows multiple Subscribers to be triggered by a single message.




## Event-based Service
- Sender does not have any expectation that the Receiver will process or perform an action on the event
- Event only includes information about the event that occurred, no data that might have been generated by the event

### Azure Event Grid Service
The event `Source/ Publisher` sends events to the EG. The event is assigned a `topic`. EG then sends the event to `Handlers` who are listening for that topic.  

Basic Concepts:  
- Event : what happened
- Event Source: where the event occured. Related to an Event Type
- Topic: endpoint of the EG that the `Source` sends events to
- Event Subscriptions: Endpoint or function on EG that filters events to correct Handler
- Event Handlers: The app or service reacting to the event

Structure of an Event:
```
  {
    "topic": string - The full resource path to the event source. Event Grid provides this value.,
    "subject": string - Publisher-defined path to the event subject.,
    "id": string,
    "eventType": string,
    "eventTime": string,
    "data":{
      object-unique-to-each-publisher
      this field is optional
    },
    "dataVersion": string,
    "metadataVersion": string
  }
```

*Event Subscription*  
- defineds which events on a topic a Handler wants to receive. The subscription can filter events on their type or subject.
*Event Topics*  
- System Topics
    + topics provided by Azure. Not visible in subscription list, but can be subscribed to by handlerrs if access is available
- Custom Topics
    + topics created by you or third parties. Visible in subscription list.

The following services can operate as event handlers to EG:
- Azure Functions
- Webhooks
- Azure Logic Apps
- Microsoft Power Automate

### Azure Event Hub Service
EH is designed for streaming events and massive amounts of data.
- Events are store in `Partitions` for 24 hours( default ) before expiring. Allows Subscriber to be offline or busy and catch up later.
- Can immediately send events to Data Lake or Blob Storage.
- All publishers are authenticated and given a token

Reasons to choose over Event Grid:  
- need to support large number of publishers sending a data stream
- need to stream data to Data Lake or Blob Storage
- need aggregation or analytics on data stream
- need high reliablity or resiliency